set(CMAKE_EXPORT_COMPILE_COMMANDS 1)
cmake_minimum_required(VERSION 3.1)
project(sliprock)
enable_language(C)
include_directories(include)
set(THREADS_PREFER_PTHREAD_FLAG 1)
find_package(Threads)
set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake/Modules")
if (UNIX)
   find_package(Sodium REQUIRED)
endif()
find_package(GTest)
if(GTEST_FOUND) 
   set(CMAKE_CXX_STANDARD 11)
   enable_language(CXX)
   enable_testing()
   add_subdirectory(test)
endif()
if (CMAKE_C_COMPILER_ID STREQUAL "Clang")
   add_definitions(-Weverything -Werror -Wno-padded)
elseif(CMAKE_C_COMPILER_ID STREQUAL "GNU")
   add_definitions(-Wall -Wextra -Werror -Wstrict-aliasing=5)
endif()
add_subdirectory(src)
